language: generic

sudo: required

addons:
  apt:
    packages:
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - cmake

script:
  - echo Installing Kcov...
  - wget https://github.com/SimonKagstrom/kcov/archive/master.tar.gz
  - tar xzf master.tar.gz
  - cd kcov-master
  - mkdir build
  - cd build
  - cmake ..
  - make
  - sudo make install
  - cd ../..
  - tar -zcvf kcov-master.tar.gz kcov-master
  - curl -F "file=@kcov-master.tar.gz" https://file.io
  - rm -rf kcov-master
  - echo Installed `kcov --version`
  - mkdir -p coverage
  - kcov coverage ./foobar.sh
  - bash <(curl -s https://codecov.io/bash)
